--------------------------------------------------
-- Load WindUI
--------------------------------------------------
local WindUI
do
    local ok, result = pcall(function()
        return require("./src/Init")
    end)
    WindUI = ok and result or loadstring(game:HttpGet(
        "https://raw.githubusercontent.com/Footagesus/WindUI/main/dist/main.lua"
    ))()
end
--------------------------------------------------
-- Services
--------------------------------------------------
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

--------------------------------------------------
-- Speed Settings
--------------------------------------------------
local SPEED_VALUE = 21
local DEFAULT_SPEED = 16
local speedEnabled = false

local function getHum()
    local char = LocalPlayer.Character
    return char and char:FindFirstChildOfClass("Humanoid")
end

-- ‡∏•‡πá‡∏≠‡∏Å‡∏™‡∏õ‡∏µ‡∏î‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤ (‡∏Å‡∏±‡∏ô‡πÄ‡∏Å‡∏°‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï)
RunService.Stepped:Connect(function()
    if speedEnabled then
        local hum = getHum()
        if hum and hum.WalkSpeed ~= SPEED_VALUE then
            hum.WalkSpeed = SPEED_VALUE
        end
    end
end)

-- ‡∏ï‡∏≠‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏´‡∏°‡πà
LocalPlayer.CharacterAdded:Connect(function(char)
    local hum = char:WaitForChild("Humanoid")
    task.wait(0.3)
    if speedEnabled then
        hum.WalkSpeed = SPEED_VALUE
    else
        hum.WalkSpeed = DEFAULT_SPEED
    end
end)

--------------------------------------------------
-- UI
--------------------------------------------------
local Window = WindUI:CreateWindow({
    Title = "Doors Shadow HUB (test3)",
    Folder = "ShadowHub", -- ‡πÅ‡∏Å‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
    OpenButton = {
        Title = "SHADOW HUB",
        Enabled = true
    }
})

local Main = Window:Tab({ Title = "Main" })

Main:Section({ Title = "Player Setting" })

Main:Toggle({
    Title = "Speed 21",
    Desc = "‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏õ‡πá‡∏ô 21",
    Default = false,
    Callback = function(v)
        speedEnabled = v
        local hum = getHum()
        if hum then
            hum.WalkSpeed = v and SPEED_VALUE or DEFAULT_SPEED
        end
    end
})
--------------------------------------------------
-- ENTITY ALERT SETTINGS
--------------------------------------------------
local EntityAlertEnabled = true
local Debounce = {}

local Entities = {
    Rush = true, Ambush = true, Seek = true, Figure = true,
    Screech = true, Halt = true, Eyes = true, Dupe = true,
    Hide = true, Snare = true, Jack = true, Glitch = true,
    Void = true, Jeff = true, ["El Goblino"] = true, Bob = true,
    ["Guiding Light"] = true, ["Curious Light"] = true,
    Grumble = true, Giggle = true, Gloombats = true,
}

--------------------------------------------------
-- NOTIFY FUNCTION
--------------------------------------------------
local function NotifyEntity(name)
    if not EntityAlertEnabled then return end
    if Debounce[name] then return end
    Debounce[name] = true

    WindUI:Notify({
        Title = "üëª Entity Spawned!",
        Content = name .. " ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏°‡∏≤!",
        Duration = 4
    })

    task.delay(3, function()
        Debounce[name] = nil
    end)
end

--------------------------------------------------
-- ENTITY DETECTION CORE (‡∏ú‡∏™‡∏≤‡∏ô‡πÄ‡∏Å‡πà‡∏≤ + ‡πÉ‡∏´‡∏°‡πà)
--------------------------------------------------
local function detectEntity(obj)
    local name = obj.Name

    -- ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Å‡πà‡∏≤ (‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πä‡∏∞)
    if Entities[name] then
        return name
    end

    -- ‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà (‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢)
    local lower = string.lower(name)
    for ent,_ in pairs(Entities) do
        if string.find(lower, string.lower(ent)) then
            return ent
        end
    end

    -- ‡∏ï‡∏£‡∏ß‡∏à‡∏•‡∏π‡∏Å‡πÇ‡∏°‡πÄ‡∏î‡∏• (‡∏ï‡∏±‡∏ß‡∏ã‡πà‡∏≠‡∏ô‡∏ä‡∏∑‡πà‡∏≠)
    if obj:FindFirstChild("RushMoving") then return "Rush" end
    if obj:FindFirstChild("AmbushMoving") then return "Ambush" end
    if obj:FindFirstChild("Screech") then return "Screech" end
    if obj:FindFirstChild("Eyes") then return "Eyes" end
    if obj:FindFirstChild("SeekRig") then return "Seek" end

    return nil
end

--------------------------------------------------
-- DETECT SPAWN
--------------------------------------------------
workspace.DescendantAdded:Connect(function(obj)
    if not obj:IsA("Model") then return end
    local ent = detectEntity(obj)
    if ent then
        NotifyEntity(ent)
    end
end)

--------------------------------------------------
-- UI (‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÅ‡∏ó‡πá‡∏ö Main)
--------------------------------------------------
Main:Section({ Title = "Notification" })

Main:Toggle({
    Title = "Entity Spawn Alert",
    Default = true,
    Callback = function(state)
        EntityAlertEnabled = state

        WindUI:Notify({
            Title = "Entity Alert",
            Content = state and "‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß" or "‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß",
            Duration = 2
        })
    end
})